<!DOCTYPE HTML>
<html>

<head>
	<title>Welcome to your ExpressLRS System</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="mui.css" />
	<link rel="stylesheet" href="elrs.css" />
</head>

<body>
	<header class="mui-appbar mui--z1 mui--text-center elrs-header">
		<img src="logo.svg" height="250" width="250" style="padding:20px;"></a>
		<h1>Welcome to your <b>ExpressLRS</b> update page<br />
		</h1>
		<p>From here you can update your <b>TX Backpack</b> module with <b>@PLATFORM@</b> firmware<br />
		<p>
		<b>Firmware Rev. </b><var>@VERSION@</var>
	</header>

	<br>
	<div class="mui-container-fluid">
		<div class="mui-panel mui-col-sm-10 mui-col-sm-offset-1">

			<ul class="mui-tabs__bar mui-tabs__bar--justified">
				<li class="mui--is-active"><a data-mui-toggle="tab" data-mui-controls="pane-justified-1">General</a></li>
				<li><a data-mui-toggle="tab" data-mui-controls="pane-justified-2">Network</a></li>
				<li><a data-mui-toggle="tab" data-mui-controls="pane-justified-3">Backpack</a></li>
				<li id="stm32"><a data-mui-toggle="tab" data-mui-controls="pane-justified-4">TX</a></li>
			</ul>

			<div class="mui-tabs__pane mui--is-active" id="pane-justified-1">
				<legend>
					<h2>Useful Links and Support</h2>
				</legend>
				<a href="https://github.com/ExpressLRS/Backpack">GitHub Repository</a>
				<br>
				<a href="https://discord.gg/dS6ReFY">Discord Chat</a>
			</div>

			<div class="mui-tabs__pane" id="pane-justified-2">
				<div id="apmode" style="display:none;">
					<h2>Join Network</h2>
					Here you can join a network and it will be saved as your &quot;home&quot; network.
					When you are in range of your &quot;home&quot; network and start WiFi update the TX Module will automatically connect.
					<form action="/sethome" id="sethome" method="POST" autocomplete="off" class="mui-form">
						<div class="autocomplete mui-textfield" style="width: 80%;">
							<input id="network" type="text" name="network" placeholder="SSID"/>
						</div>
						<div id="loader" style="float:right" class="loader"></div>
						<div class="mui-textfield" style="width: 80%;">
							<input type="password" id="password" name="password" placeholder="Password" />
						</div>
						<input type="submit" value="Join" class="mui-btn mui-btn--primary">
					</form>
					<br>
					<a id="connect" href="#">Connect to &quot;home&quot; network: <span id="homenet"></span></a>
				</div>

				<div id="stamode" style="display:none;">
					<h2>Home Network: <span id="ssid"></span></h2>
					<br>
					Forget &quot;home&quot; network and start access point
					<br>
					<a id="forget" href="#" class="mui-btn mui-btn--primary">Forget</a>
					<br><br>
					Disconnect from &quot;home&quot; network start access point
					<br>
					<a id="access" href="#" class="mui-btn mui-btn--primary">Disconnect</a>
				</div>
			</div>

			<div class="mui-tabs__pane" id="pane-justified-3">
				<h2>Backpack Firmware Update</h2>
				Here you can update your backpack firmware,
				be careful to upload the correct file otherwise a bad flash may occur. If this happens you will need
				to reflash via USB/Serial.
				<br/>
				<br/>
				<form id='upload_form_bp' method='POST' enctype='multipart/form-data'>
					<div class="group">
						<input id='firmware_file_bp' type='file' name='update'>
						<input type='submit' value='Update' class='mui-btn mui-btn--primary'>
					</div>
					<br/>
					<h3 id="status_bp"></h3>
					<progress id="progressBar_bp" value="0" max="100" style="width:100%;"></progress>
				</form>
			</div>

			<div class="mui-tabs__pane" id="pane-justified-4">
				<h2>TX Module Firmware Update</h2>
				Here you can update your TX module firmware,
				be careful to upload the correct file otherwise a bad flash may occur. If this happens you will need
				to reflash via USB/Serial.
				<br/>
				<br/>
				<form id='upload_form_tx' method='POST' enctype='multipart/form-data'>
					<div class="group">
						<input id='firmware_file_tx' type='file' name='update'>
						<input type='submit' value='Update' class='mui-btn mui-btn--primary'>
					</div>
					<br/>
					<h3 id="status_tx"></h3>
					<progress id="progressBar_tx" value="0" max="100" style="width:100%;"></progress>
				</form>
			</div>
		</div>
	</div>
</body>
<script src="mui.js"></script>
<script src="scan.js"></script>
</html>
